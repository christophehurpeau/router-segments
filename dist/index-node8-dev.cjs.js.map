{"version":3,"file":"index-node8-dev.cjs.js","sources":["../src/routes/createRoutePath.ts","../src/routes/NotLocalizedEndRoute.ts","../src/routes/LocalizedEndRoute.ts","../src/routes/NotLocalizedSegmentRoute.ts","../src/routes/LocalizedSegmentRoute.ts","../src/routes/create.ts","../src/router/findMatch.ts","../src/router/createRouter.ts","../src/builder/createSegmentRouterBuilderCreator.ts","../src/builder/createRouterBuilder.ts"],"sourcesContent":["import pathToRegExp, { Key } from 'path-to-regexp';\nimport { SegmentRoutePath, EndRoutePath } from '../types';\n\nfunction internalCreateRoutePath(\n  path: string,\n  completePath: string,\n  segment: true,\n): SegmentRoutePath;\nfunction internalCreateRoutePath(\n  path: string,\n  completePath: string,\n  segment: false,\n): EndRoutePath;\n\nfunction internalCreateRoutePath(\n  path: string,\n  completePath: string,\n  segment: boolean,\n): SegmentRoutePath | EndRoutePath {\n  const keys: Key[] = [];\n  const regExp = pathToRegExp(segment ? `${path}/(.+)?` : path, keys, {\n    sensitive: true,\n    strict: true,\n  });\n  const namedParams = keys.map((key) => key.name).filter(Boolean);\n\n  if (segment) return { path, completePath, regExp, namedParams };\n\n  return {\n    path,\n    completePath,\n    regExp,\n    namedParams,\n    toPath: pathToRegExp.compile(completePath),\n  };\n}\n\nexport const createRoutePathSegment = (\n  path: string,\n  completePath: string,\n): SegmentRoutePath => internalCreateRoutePath(path, completePath, true);\n\nexport const createRoutePath = (\n  path: string,\n  completePath: string,\n): EndRoutePath => internalCreateRoutePath(path, completePath, false);\n","import { EndRoutePath, RouteRef } from './types';\nimport { EndRoute, NotLocalizedRoute } from './interfaces';\n\nexport default class NotLocalizedEndRoute\n  implements EndRoute, NotLocalizedRoute<EndRoutePath> {\n  path: EndRoutePath;\n\n  ref: RouteRef;\n\n  constructor(path: EndRoutePath, ref: RouteRef) {\n    this.path = path;\n    this.ref = ref;\n    // Object.freeze(this);\n  }\n\n  getPath(): EndRoutePath {\n    return this.path;\n  }\n\n  isSegment(): false {\n    return false;\n  }\n\n  isLocalized(): false {\n    return false;\n  }\n\n  toJSON() {\n    return this.path;\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\n","import { LocaleType, EndRoutePath, RouteRef } from './types';\nimport { EndRoute, LocalizedRoute } from './interfaces';\n\nexport default class LocalizedEndRoute<Locales extends LocaleType>\n  implements EndRoute, LocalizedRoute<EndRoutePath, Locales> {\n  localizedPaths: Map<LocaleType, EndRoutePath>;\n\n  ref: RouteRef;\n\n  constructor(localizedPaths: Map<LocaleType, EndRoutePath>, ref: RouteRef) {\n    this.localizedPaths = localizedPaths;\n    this.ref = ref;\n    Object.freeze(this);\n  }\n\n  getPath(locale: Locales): EndRoutePath {\n    return this.localizedPaths.get(locale) as EndRoutePath;\n  }\n\n  isSegment(): false {\n    return false;\n  }\n\n  isLocalized(): true {\n    return true;\n  }\n\n  toJSON() {\n    return [...this.localizedPaths.entries()];\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\n","import NotLocalizedEndRoute from './NotLocalizedEndRoute';\nimport { SegmentRoute, NotLocalizedRoute } from './interfaces';\nimport { SegmentRoutePath } from './types';\n\nexport default class NotLocalizedSegmentRoute\n  implements SegmentRoute, NotLocalizedRoute<SegmentRoutePath> {\n  path: SegmentRoutePath;\n\n  nestedRoutes: NotLocalizedRoute<any>[] = [];\n\n  defaultRoute: undefined | NotLocalizedEndRoute;\n\n  constructor(path: SegmentRoutePath) {\n    this.path = path;\n  }\n\n  freeze() {\n    Object.freeze(this);\n    Object.freeze(this.nestedRoutes);\n  }\n\n  getPath(): SegmentRoutePath {\n    return this.path;\n  }\n\n  isSegment(): true {\n    return true;\n  }\n\n  isLocalized(): false {\n    return false;\n  }\n\n  toJSON() {\n    return this.path;\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\n","import LocalizedEndRoute from './LocalizedEndRoute';\nimport { LocaleType, SegmentRoutePath } from './types';\nimport { SegmentRoute, LocalizedRoute } from './interfaces';\n\nexport default class LocalizedSegmentRoute<Locales extends LocaleType>\n  implements SegmentRoute, LocalizedRoute<SegmentRoutePath, Locales> {\n  localizedPaths: Map<Locales, SegmentRoutePath>;\n\n  nestedRoutes: LocalizedRoute<any, Locales>[] = [];\n\n  defaultRoute: undefined | LocalizedEndRoute<Locales>;\n\n  constructor(localizedPaths: Map<Locales, SegmentRoutePath>) {\n    this.localizedPaths = localizedPaths;\n  }\n\n  freeze() {\n    Object.freeze(this);\n    Object.freeze(this.nestedRoutes);\n  }\n\n  getPath(locale: Locales): SegmentRoutePath {\n    return this.localizedPaths.get(locale) as SegmentRoutePath;\n  }\n\n  isSegment(): true {\n    return true;\n  }\n\n  isLocalized(): true {\n    return true;\n  }\n\n  toJSON() {\n    return [...this.localizedPaths.entries()];\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\n","import { PRODUCTION } from 'pob-babel';\nimport {\n  LocaleType,\n  LocalizedPathsRecord,\n  EndRoutePath,\n  SegmentRoutePath,\n  RouteRef,\n} from '../types';\nimport { createRoutePath, createRoutePathSegment } from './createRoutePath';\nimport Route from './NotLocalizedEndRoute';\nimport LocalizedEndRoute from './LocalizedEndRoute';\nimport NotLocalizedSegmentRoute from './NotLocalizedSegmentRoute';\nimport LocalizedSegmentRoute from './LocalizedSegmentRoute';\n\nconst createLocalizedPaths = <Locales extends LocaleType>(\n  localizedPathsRecord: LocalizedPathsRecord<Locales>,\n  completeLocalizedPathsRecord: LocalizedPathsRecord<Locales>,\n  segment: boolean,\n) => {\n  const localizedPaths = new Map();\n  // @ts-ignore https://github.com/Microsoft/TypeScript/pull/28899\n  Object.keys(localizedPathsRecord).forEach((locale: Locales) => {\n    const path = localizedPathsRecord[locale];\n    if (segment) {\n      const routerPath: SegmentRoutePath = createRoutePathSegment(\n        path,\n        completeLocalizedPathsRecord[locale],\n      );\n      localizedPaths.set(locale, routerPath);\n    } else {\n      const routerPath: EndRoutePath = createRoutePath(\n        path,\n        completeLocalizedPathsRecord[locale],\n      );\n      localizedPaths.set(locale, routerPath);\n    }\n  });\n  return localizedPaths;\n};\n\nconst checkRef = (ref: RouteRef) => {\n  if (!ref) throw new Error(`Invalid ref: \"${ref}\"`);\n};\n\nexport const createRoute = (\n  path: string,\n  completePath: string,\n  ref: RouteRef,\n): Route => {\n  /* istanbul ignore if */\n  if (!PRODUCTION) checkRef(ref);\n  const routePath: EndRoutePath = createRoutePath(path, completePath);\n  return new Route(routePath, ref);\n};\n\nexport const createLocalizedRoute = <Locales extends LocaleType>(\n  localizedPathsRecord: LocalizedPathsRecord<Locales>,\n  completeLocalizedPathsRecord: LocalizedPathsRecord<Locales>,\n  ref: RouteRef,\n): LocalizedEndRoute<Locales> => {\n  /* istanbul ignore if */\n  if (!PRODUCTION) checkRef(ref);\n  const localizedPaths = createLocalizedPaths(\n    localizedPathsRecord,\n    completeLocalizedPathsRecord,\n    false,\n  );\n  return new LocalizedEndRoute(localizedPaths, ref);\n};\n\nexport const createSegmentRoute = (\n  path: string,\n  completePath: string,\n): NotLocalizedSegmentRoute => {\n  const routePath = createRoutePathSegment(path, completePath);\n  return new NotLocalizedSegmentRoute(routePath);\n};\n\nexport const createLocalizedSegmentRoute = <Locales extends LocaleType>(\n  localizedPathsRecord: LocalizedPathsRecord<Locales>,\n  completeLocalizedPathsRecord: LocalizedPathsRecord<Locales>,\n): LocalizedSegmentRoute<Locales> => {\n  const localizedPaths = createLocalizedPaths(\n    localizedPathsRecord,\n    completeLocalizedPathsRecord,\n    true,\n  );\n  return new LocalizedSegmentRoute(localizedPaths);\n};\n","import { PRODUCTION } from 'pob-babel';\nimport Logger from 'nightingale-logger';\nimport {\n  Routes,\n  LocaleType,\n  RoutePathInterface,\n  RouteRef,\n  SegmentRoutePath,\n  EndRoutePath,\n} from '../types';\nimport { EndRoute, Route, SegmentRoute } from '../routes/interfaces';\n\nexport interface RouteMatch<Locales extends LocaleType | never> {\n  namedParams: undefined | Map<string, string>;\n  otherParams: undefined | string[];\n  path: string;\n  ref: RouteRef;\n  route: Route<any, Locales>;\n  routePath: SegmentRoutePath | EndRoutePath;\n}\n\nconst logger = !PRODUCTION\n  ? new Logger('router-segments:findMatch')\n  : undefined;\n\nconst parseOtherParams = (wildcard: string) =>\n  wildcard ? wildcard.split('/') : [];\n\nconst findMatch = <Locales extends LocaleType>(\n  path: string,\n  completePath: string,\n  routes: Routes<Locales>,\n  locale: Locales = 'en' as Locales,\n  namedParams?: Map<string | number, string>,\n): null | RouteMatch<Locales> => {\n  let result = null;\n\n  routes.some((route) => {\n    const routePath: RoutePathInterface = route.getPath(locale);\n\n    if (!PRODUCTION && !routePath) {\n      throw new Error(`Unknown localized route for locale ${locale}`);\n    }\n\n    /* istanbul ignore next */\n    if (!PRODUCTION) {\n      // @ts-ignore\n      logger.debug(`trying ${routePath.regExp}`);\n    }\n\n    const match = routePath.regExp.exec(path);\n    if (!match) return false;\n\n    match.shift(); // remove m[0], === path;\n\n    let groupCount = match.length;\n    let group = 0;\n\n    if (routePath.namedParams.length !== 0) {\n      // set params\n      if (!namedParams) namedParams = new Map();\n\n      routePath.namedParams.forEach((paramName: string | number) => {\n        (namedParams as Map<string | number, string>).set(\n          paramName,\n          match[group++],\n        );\n      });\n    }\n\n    if (route.isSegment()) {\n      const segment = route as SegmentRoute;\n      const restOfThePath = match[--groupCount];\n\n      if (restOfThePath) {\n        result = findMatch(\n          `/${restOfThePath}`,\n          completePath,\n          segment.nestedRoutes,\n          locale,\n          namedParams,\n        );\n\n        return result !== null;\n      }\n\n      if (!segment.defaultRoute) {\n        return false;\n      }\n\n      route = segment.defaultRoute;\n    }\n\n    const endRoute = route as EndRoute;\n\n    const otherParams =\n      group + 1 !== groupCount ? undefined : parseOtherParams(match[group]);\n\n    result = Object.freeze({\n      ref: endRoute.ref,\n      path: completePath,\n      route: endRoute,\n      routePath,\n      namedParams,\n      otherParams,\n    });\n\n    return true;\n  });\n\n  return result;\n};\n\nexport default <Locales extends LocaleType>(\n  path: string,\n  routes: Routes<Locales>,\n  locale?: Locales,\n): null | RouteMatch<Locales> => findMatch(path, path, routes, locale);\n","import { Routes, RouteMap, LocaleType } from '../types';\nimport { EndRoute } from '../routes/interfaces';\nimport findMatch, { RouteMatch } from './findMatch';\n\nexport interface Router<Locales extends LocaleType | never> {\n  get(key: string): EndRoute;\n  find(path: string, locale?: Locales): null | RouteMatch<Locales>;\n  toLocalizedPath(locale: Locales, key: string, args?: any): string;\n  toPath(key: string, args?: any): string;\n}\n\nexport default <Locales extends LocaleType | never>(\n  routes: Routes<Locales>,\n  routeMap: RouteMap<Locales>,\n): Router<Locales> => {\n  const getRequiredRoute = (routeKey: string): EndRoute => {\n    const route = routeMap.get(routeKey);\n    if (!route) throw new Error(`No route named \"${routeKey}\"`);\n    return route;\n  };\n\n  return {\n    get: getRequiredRoute,\n    find: (path: string, locale?: Locales): null | RouteMatch<Locales> =>\n      findMatch(path, routes, locale),\n    toPath: (key: string, args?: any): string =>\n      getRequiredRoute(key)\n        .getPath()\n        .toPath(args),\n    toLocalizedPath: (locale: Locales, key: string, args?: any): string =>\n      getRequiredRoute(key)\n        .getPath(locale)\n        .toPath(args),\n  };\n};\n","import { LocalizedPathsRecord, RouteRef, LocaleType } from '../types';\nimport {\n  createRoute,\n  createLocalizedRoute,\n  createSegmentRoute,\n  createLocalizedSegmentRoute,\n} from '../routes/create';\nimport { LocalizedSegmentRoute } from '../routes';\nimport { EndRoute, SegmentRoute } from '../routes/interfaces';\n\nexport interface SegmentRouterBuilder<Locales extends LocaleType> {\n  add(path: string, ref: RouteRef, key?: string): void;\n  addLocalized(\n    localizedPaths: LocalizedPathsRecord<Locales>,\n    ref: RouteRef,\n    key?: string,\n  ): void;\n  addLocalizedSegment(\n    localizedPaths: LocalizedPathsRecord<Locales>,\n    buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n  ): void;\n  addSegment(\n    path: string,\n    buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n  ): void;\n  defaultRoute(ref: RouteRef, key?: string): void;\n}\n\nexport default <Locales extends LocaleType>(\n  defaultLocale: undefined | Locales,\n  addToRouteMap: (key: string, route: EndRoute<Locales>) => void,\n) => {\n  const createSegmentRouterBuilder = (\n    segmentRoute: SegmentRoute<Locales>,\n  ): SegmentRouterBuilder<Locales> => {\n    const getCompletePath = (path: string, locale?: Locales) =>\n      `${segmentRoute.getPath(locale).completePath}${path}`;\n\n    const getCompleteLocalizedPaths = (\n      localizedPaths: LocalizedPathsRecord<Locales>,\n    ): LocalizedPathsRecord<Locales> => {\n      const completeLocalizedPaths: { [locale: string]: string } = {};\n\n      // @ts-ignore https://github.com/Microsoft/TypeScript/pull/28899\n      Object.keys(localizedPaths).forEach((locale: Locales) => {\n        completeLocalizedPaths[locale] = getCompletePath(\n          localizedPaths[locale],\n          locale,\n        );\n      });\n\n      return completeLocalizedPaths;\n    };\n\n    const createLocalizedPathFromSegment = (\n      segmentRoute: LocalizedSegmentRoute<Locales>,\n      path: string,\n    ): Record<Locales, string> => {\n      const localizedPaths: { [locale: string]: string } = {};\n      [...segmentRoute.localizedPaths.keys()].forEach((locale) => {\n        localizedPaths[locale] = path;\n      });\n      return localizedPaths;\n    };\n\n    const _createLocalizedEndRoute = (\n      localizedPaths: LocalizedPathsRecord<Locales>,\n      ref: RouteRef,\n      key?: string,\n    ) => {\n      const completeLocalizedPaths = getCompleteLocalizedPaths(localizedPaths);\n      const finalKey: string =\n        key || completeLocalizedPaths[defaultLocale as Locales];\n      const route = createLocalizedRoute(\n        localizedPaths,\n        completeLocalizedPaths,\n        ref,\n      );\n      addToRouteMap(finalKey, route);\n      return route;\n    };\n\n    const _createEndRoute = (path: string, ref: RouteRef, key?: string) => {\n      if (segmentRoute.isLocalized()) {\n        return _createLocalizedEndRoute(\n          createLocalizedPathFromSegment(\n            segmentRoute as LocalizedSegmentRoute<Locales>,\n            path,\n          ),\n          ref,\n          key,\n        );\n      }\n\n      const completePath = getCompletePath(path);\n      const route = createRoute(path, completePath, ref);\n      const finalKey: string = key || completePath;\n      addToRouteMap(finalKey, route);\n      return route;\n    };\n\n    const _createLocalizedSegmentRoute = (\n      localizedPaths: LocalizedPathsRecord<Locales>,\n      buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n    ) => {\n      const completeLocalizedPaths = getCompleteLocalizedPaths(localizedPaths);\n      const route = createLocalizedSegmentRoute(\n        localizedPaths,\n        completeLocalizedPaths,\n      );\n      buildSegment(createSegmentRouterBuilder(route));\n      route.freeze();\n      return route;\n    };\n\n    const _createSegmentRoute = (\n      path: string,\n      buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n    ) => {\n      if (segmentRoute.isLocalized()) {\n        return _createLocalizedSegmentRoute(\n          createLocalizedPathFromSegment(\n            segmentRoute as LocalizedSegmentRoute<Locales>,\n            path,\n          ),\n          buildSegment,\n        );\n      }\n\n      const completePath = getCompletePath(path);\n      const route = createSegmentRoute(path, completePath);\n      buildSegment(createSegmentRouterBuilder(route));\n      route.freeze();\n      return route;\n    };\n\n    return {\n      defaultRoute: (ref: RouteRef, key?: string) => {\n        segmentRoute.defaultRoute = _createEndRoute('', ref, key);\n      },\n\n      add: (path: string, ref: RouteRef, key?: string): void => {\n        segmentRoute.nestedRoutes.push(_createEndRoute(path, ref, key));\n      },\n\n      addLocalized: (\n        localizedPaths: LocalizedPathsRecord<Locales>,\n        ref: RouteRef,\n        key?: string,\n      ): void => {\n        if (!defaultLocale) throw new Error('Invalid locales');\n        segmentRoute.nestedRoutes.push(\n          _createLocalizedEndRoute(localizedPaths, ref, key),\n        );\n      },\n\n      addSegment: (\n        path: string,\n        buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n      ): void => {\n        segmentRoute.nestedRoutes.push(_createSegmentRoute(path, buildSegment));\n      },\n\n      addLocalizedSegment: (\n        localizedPaths: LocalizedPathsRecord<Locales>,\n        buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n      ): void => {\n        if (!defaultLocale) throw new Error('Invalid locales');\n        segmentRoute.nestedRoutes.push(\n          _createLocalizedSegmentRoute(localizedPaths, buildSegment),\n        );\n      },\n    };\n  };\n  return createSegmentRouterBuilder;\n};\n","import {\n  LocaleType,\n  LocalizedPathsRecord,\n  Routes,\n  RouteMap,\n  RouteRef,\n} from '../types';\nimport {\n  createRoute,\n  createLocalizedRoute,\n  createSegmentRoute,\n  createLocalizedSegmentRoute,\n} from '../routes/create';\nimport createRouter, { Router } from '../router/createRouter';\nimport { EndRoute } from '../routes/interfaces';\nimport createSegmentRouterBuilderCreator, {\n  SegmentRouterBuilder,\n} from './createSegmentRouterBuilderCreator';\n\nexport interface RouterBuilder<Locales extends LocaleType | never> {\n  add(path: string, ref: RouteRef, key?: string): void;\n  addLocalized(\n    localizedPaths: LocalizedPathsRecord<Locales>,\n    ref: RouteRef,\n    key?: string,\n  ): void;\n  addLocalizedSegment(\n    localizedPaths: LocalizedPathsRecord<Locales>,\n    buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n  ): void;\n  addSegment(\n    path: string,\n    buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n  ): void;\n  createRouter(): Router<Locales>;\n  getRoutes(): Routes<Locales>;\n}\n\nexport default <Locales extends LocaleType>(\n  locales?: Locales[],\n): RouterBuilder<Locales> => {\n  const defaultLocale = locales && locales[0];\n  const routes: Routes<Locales> = [];\n  const routeMap: RouteMap<Locales> = new Map();\n\n  const addToRouteMap = (key: string, route: EndRoute<Locales>) => {\n    if (routeMap.has(key)) throw new Error(`\"${key}\" is already used`);\n    routeMap.set(key, route);\n  };\n\n  const createSegmentRouterBuilder = createSegmentRouterBuilderCreator(\n    defaultLocale,\n    addToRouteMap,\n  );\n\n  return {\n    add: (path: string, ref: RouteRef, key?: string): void => {\n      const route = createRoute(path, path, ref);\n      routes.push(route);\n      if (!key) key = path;\n      addToRouteMap(key, route);\n    },\n\n    addLocalized: (\n      localizedPaths: LocalizedPathsRecord<Locales>,\n      ref: RouteRef,\n      key?: string,\n    ): void => {\n      if (!defaultLocale) throw new Error('Invalid locales');\n      const route = createLocalizedRoute(localizedPaths, localizedPaths, ref);\n      routes.push(route);\n      const finalKey: string = key || localizedPaths[defaultLocale];\n      addToRouteMap(finalKey, route);\n    },\n\n    addSegment: (\n      path: string,\n      buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n    ): void => {\n      const route = createSegmentRoute(path, path);\n      buildSegment(createSegmentRouterBuilder(route));\n      route.freeze();\n      routes.push(route);\n    },\n\n    addLocalizedSegment: (\n      localizedPaths: LocalizedPathsRecord<Locales>,\n      buildSegment: (builder: SegmentRouterBuilder<Locales>) => void,\n    ): void => {\n      if (!defaultLocale) throw new Error('Invalid locales');\n      const route = createLocalizedSegmentRoute(localizedPaths, localizedPaths);\n      buildSegment(createSegmentRouterBuilder(route));\n      route.freeze();\n      routes.push(route);\n    },\n\n    getRoutes: () => routes,\n    createRouter: () => createRouter(routes, routeMap),\n  };\n};\n"],"names":["internalCreateRoutePath","path","completePath","segment","keys","regExp","pathToRegExp","sensitive","strict","namedParams","map","key","name","filter","Boolean","toPath","compile","createRoutePathSegment","createRoutePath","NotLocalizedEndRoute","constructor","ref","getPath","isSegment","isLocalized","toJSON","toString","JSON","stringify","LocalizedEndRoute","localizedPaths","Object","freeze","locale","get","entries","NotLocalizedSegmentRoute","nestedRoutes","LocalizedSegmentRoute","createLocalizedPaths","localizedPathsRecord","completeLocalizedPathsRecord","Map","forEach","routerPath","set","checkRef","Error","createRoute","routePath","Route","createLocalizedRoute","createSegmentRoute","createLocalizedSegmentRoute","logger","Logger","parseOtherParams","wildcard","split","findMatch","routes","result","some","route","debug","match","exec","shift","groupCount","length","group","paramName","restOfThePath","defaultRoute","endRoute","otherParams","undefined","routeMap","getRequiredRoute","routeKey","find","args","toLocalizedPath","defaultLocale","addToRouteMap","createSegmentRouterBuilder","segmentRoute","getCompletePath","getCompleteLocalizedPaths","completeLocalizedPaths","createLocalizedPathFromSegment","_createLocalizedEndRoute","finalKey","_createEndRoute","_createLocalizedSegmentRoute","buildSegment","_createSegmentRoute","add","push","addLocalized","addSegment","addLocalizedSegment","locales","has","createSegmentRouterBuilderCreator","getRoutes","createRouter"],"mappings":"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"}